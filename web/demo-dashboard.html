<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AEGIS — Trustless AI Trading Agent</title>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg: #0a0a0a;
    --surface: #111111;
    --border: #262626;
    --text: #e0e0e0;
    --dim: #777;
    --green: #00ff41;
    --green-dim: #00cc33;
    --orange: #ff9500;
    --red: #ff3b30;
    --blue: #0af;
    --mono: 'SF Mono', Consolas, Monaco, 'Courier New', monospace;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--mono);
    font-size: 14px;
    line-height: 1.6;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* ── HEADER ──────────────────────────────────────── */
  header {
    text-align: center;
    padding: 40px 20px 30px;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, #0f1a0f 0%, var(--bg) 100%);
  }
  header img.logo {
    height: 80px;
    margin-bottom: 12px;
    filter: drop-shadow(0 0 12px rgba(0,255,65,.25));
  }
  header h1 {
    font-size: 28px;
    letter-spacing: 6px;
    text-transform: uppercase;
    color: #fff;
    margin-bottom: 4px;
  }
  header p.subtitle {
    font-size: 13px;
    color: var(--dim);
    margin-bottom: 18px;
  }
  .badge {
    display: inline-block;
    padding: 6px 22px;
    border: 2px solid var(--green);
    border-radius: 6px;
    font-size: 18px;
    font-weight: bold;
    color: var(--green);
    letter-spacing: 4px;
    text-shadow: 0 0 10px rgba(0,255,65,.5);
    box-shadow: 0 0 20px rgba(0,255,65,.12);
  }
  .badge .dot { animation: pulse 2s ease-in-out infinite; }
  @keyframes pulse { 0%,100%{ opacity:1 } 50%{ opacity:.4 } }

  /* ── MAIN GRID ───────────────────────────────────── */
  main {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    max-width: 1280px;
    width: 100%;
    margin: 0 auto;
  }
  @media (max-width: 768px) {
    main { grid-template-columns: 1fr; }
  }

  .panel {
    padding: 28px 32px;
    border-right: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
  }
  .panel:nth-child(2) { border-right: none; }
  @media (max-width: 768px) {
    .panel { border-right: none; }
  }

  .panel-title {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: var(--green-dim);
    margin-bottom: 20px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }

  /* ── DATA ROWS ───────────────────────────────────── */
  .row {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 5px 0;
  }
  .row .label { color: var(--dim); font-size: 12px; }
  .row .value { color: #fff; font-size: 13px; text-align: right; word-break: break-all; }
  .row .value.green { color: var(--green); }
  .row .value.orange { color: var(--orange); }
  .row .value.red { color: var(--red); }
  .row .value.blue { color: var(--blue); }
  .row .value.dim { color: var(--dim); }

  .wallet-addr {
    background: #0d1a0d;
    border: 1px solid #1a3a1a;
    border-radius: 4px;
    padding: 10px 14px;
    margin: 8px 0 14px;
    font-size: 12px;
    color: var(--green);
    word-break: break-all;
    text-align: center;
    letter-spacing: 0.5px;
  }

  /* ── SIGNAL BOX ──────────────────────────────────── */
  .signal-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 16px 18px;
    margin: 16px 0;
  }
  .signal-box .signal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  .signal-box .signal-label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--dim);
  }
  .signal-badge {
    display: inline-block;
    padding: 3px 12px;
    border-radius: 4px;
    font-size: 13px;
    font-weight: bold;
    letter-spacing: 2px;
  }
  .signal-badge.hold { background: #332800; color: var(--orange); border: 1px solid #664e00; }
  .signal-badge.buy  { background: #002200; color: var(--green); border: 1px solid #004400; }
  .signal-badge.sell { background: #220000; color: var(--red); border: 1px solid #440000; }

  .reason {
    font-size: 12px;
    color: var(--dim);
    font-style: italic;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid var(--border);
  }

  /* ── POLICY CHECKS ───────────────────────────────── */
  .check-list { list-style: none; margin: 12px 0; }
  .check-list li {
    padding: 4px 0;
    font-size: 13px;
  }
  .check-list .icon { margin-right: 6px; }

  /* ── ATTESTATION HASH ────────────────────────────── */
  .hash-block {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 10px 14px;
    margin: 8px 0;
    font-size: 11px;
    color: var(--dim);
    word-break: break-all;
    line-height: 1.5;
  }

  .security-row {
    display: flex;
    align-items: center;
    padding: 6px 0;
    font-size: 13px;
  }
  .security-row .icon { margin-right: 8px; font-size: 15px; }
  .security-row .secure { color: var(--green); }
  .security-row .txt { color: var(--text); }

  /* ── LINKS ───────────────────────────────────────── */
  .links { margin-top: 18px; padding-top: 12px; border-top: 1px solid var(--border); }
  .links a {
    display: block;
    color: var(--blue);
    text-decoration: none;
    font-size: 12px;
    padding: 4px 0;
    transition: color .15s;
  }
  .links a:hover { color: #fff; }
  .links a::before { content: '→ '; color: var(--dim); }

  /* ── UPTIME BAR ──────────────────────────────────── */
  .uptime-bar {
    display: flex;
    gap: 2px;
    margin: 14px 0 6px;
  }
  .uptime-bar .tick {
    flex: 1;
    height: 18px;
    border-radius: 2px;
    background: var(--green-dim);
    opacity: .85;
  }
  .uptime-label {
    font-size: 11px;
    color: var(--dim);
    text-align: center;
  }

  /* ── FOOTER ──────────────────────────────────────── */
  footer {
    text-align: center;
    padding: 24px 20px;
    border-top: 1px solid var(--border);
    font-size: 11px;
    color: #555;
    line-height: 1.7;
    max-width: 800px;
    margin: 0 auto;
  }

  /* ── SECTION SPACER ──────────────────────────────── */
  .spacer { height: 18px; }

  /* ── EXPANDABLE SECTIONS ─────────────────────────── */
  .expandable-section {
    max-width: 1280px;
    width: 100%;
    margin: 0 auto;
    border-bottom: 1px solid var(--border);
  }
  .expand-btn {
    display: block;
    width: 100%;
    background: var(--surface);
    color: var(--text);
    border: none;
    border-top: 1px solid var(--border);
    padding: 16px 32px;
    font-family: var(--mono);
    font-size: 14px;
    text-align: left;
    cursor: pointer;
    transition: background .15s;
    letter-spacing: 0.5px;
  }
  .expand-btn:hover { background: #1a1a1a; }
  .expand-btn .arrow {
    display: inline-block;
    transition: transform .2s;
    margin-left: 8px;
    font-size: 11px;
    color: var(--dim);
  }
  .expand-btn.open .arrow { transform: rotate(90deg); }

  .expand-content {
    display: none;
    padding: 0 32px 28px;
    background: var(--bg);
  }
  .expand-content.open { display: block; }

  .log-viewer {
    background: #050505;
    border: 1px solid #1a3a1a;
    border-radius: 4px;
    padding: 20px;
    max-height: 420px;
    overflow-y: auto;
    font-family: var(--mono);
    font-size: 12px;
    line-height: 1.7;
    color: var(--green);
    white-space: pre-wrap;
    word-break: break-all;
  }
  .log-viewer .log-dim { color: #2a6e2a; }
  .log-viewer .log-tag { color: #5ec85e; }
  .log-viewer .log-val { color: var(--green); }
  .log-viewer .log-warn { color: var(--orange); }
  .log-viewer .log-head { color: #fff; font-weight: bold; }

  .log-viewer::-webkit-scrollbar { width: 6px; }
  .log-viewer::-webkit-scrollbar-track { background: #111; }
  .log-viewer::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }

  .attest-viewer {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 24px 28px;
    font-size: 13px;
    line-height: 1.8;
    color: var(--text);
  }
  .attest-viewer h2 {
    font-size: 16px;
    color: #fff;
    margin: 22px 0 10px;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--border);
  }
  .attest-viewer h2:first-child { margin-top: 0; }
  .attest-viewer table {
    width: 100%;
    border-collapse: collapse;
    margin: 8px 0 16px;
  }
  .attest-viewer th,
  .attest-viewer td {
    text-align: left;
    padding: 6px 12px;
    border: 1px solid var(--border);
    font-size: 12px;
  }
  .attest-viewer th { color: var(--dim); background: #0d0d0d; }
  .attest-viewer td { color: var(--text); }
  .attest-viewer code {
    background: #0a0a0a;
    border: 1px solid var(--border);
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 12px;
    color: var(--green);
    word-break: break-all;
  }
  .attest-viewer ul {
    margin: 8px 0 8px 20px;
    color: var(--dim);
  }
  .attest-viewer li { padding: 2px 0; }
  .attest-viewer strong { color: #fff; }
</style>
</head>
<body>

<!-- ════════════════ HEADER ════════════════ -->
<header>
  <img class="logo" src="../images/Aegis Logo Transparent.png" alt="Aegis" onerror="this.style.display='none'">
  <h1>Aegis</h1>
  <p class="subtitle">Trustless AI Trading Agent &middot; Intel TDX TEE &middot; Oasis ROFL</p>
  <div class="badge"><span class="dot">&#x1F7E2;</span>&ensp;LIVE IN TEE</div>
</header>

<!-- ════════════════ MAIN ════════════════ -->
<main>

  <!-- ──── LEFT: Agent Activity ──── -->
  <div class="panel">
    <div class="panel-title">Agent Activity</div>

    <div class="row"><span class="label">Network</span><span class="value">Base Sepolia</span></div>
    <div class="row"><span class="label">Balance</span><span class="value dim">0.0 ETH (testnet)</span></div>
    <div class="row"><span class="label">Last Check</span><span class="value">2026-02-08 08:29 UTC</span></div>
    <div class="row"><span class="label">Check Interval</span><span class="value">600 s (10 min)</span></div>

    <div class="wallet-addr">
      <div style="font-size:10px;color:var(--dim);margin-bottom:4px;">TEE WALLET ADDRESS</div>
      0x84F2ff12c1cbCebc73F37386b05c06464ab5e147
    </div>

    <!-- Signal Box -->
    <div class="signal-box">
      <div class="signal-header">
        <span class="signal-label">Latest Signal</span>
        <span class="signal-badge hold">HOLD</span>
      </div>
      <div class="row"><span class="label">ETH (CoinGecko)</span><span class="value">$2,095.94</span></div>
      <div class="row"><span class="label">ETH (CryptoCompare)</span><span class="value">$2,101.89</span></div>
      <div class="row"><span class="label">Oracle Consensus</span><span class="value green">&#x2714; 2/2 agree (0.28%)</span></div>
      <div class="row"><span class="label">RSI(14)</span><span class="value orange">59.47 &mdash; Neutral</span></div>
      <div class="reason">"RSI 59.47 in neutral range [30, 70]"</div>
    </div>

    <!-- Policy -->
    <div class="panel-title" style="margin-top:18px;">Policy Engine</div>
    <ul class="check-list">
      <li><span class="icon">&#x2705;</span> Emergency Stop: <strong style="color:var(--green)">Inactive</strong></li>
      <li><span class="icon">&#x2705;</span> Max Trade Size: 0.5 ETH</li>
      <li><span class="icon">&#x2705;</span> Daily Limit: 2.0 ETH</li>
      <li><span class="icon">&#x2705;</span> Min Trade Interval: 600 s</li>
      <li><span class="icon">&#x2705;</span> Slippage Cap: 2%</li>
      <li><span class="icon">&#x2705;</span> Trade Approved: N/A (HOLD)</li>
    </ul>

    <!-- Uptime -->
    <div class="spacer"></div>
    <div class="panel-title">Uptime (last 24 cycles)</div>
    <div class="uptime-bar">
      <div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div>
      <div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div>
      <div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div>
      <div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div>
      <div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div>
      <div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div>
    </div>
    <div class="uptime-label">24 / 24 cycles successful &middot; 100% uptime since 03:54 UTC</div>
  </div>

  <!-- ──── RIGHT: Attestation ──── -->
  <div class="panel">
    <div class="panel-title">Cryptographic Verification</div>

    <div class="row"><span class="label">TEE Type</span><span class="value green">Intel TDX &#x2714;</span></div>
    <div class="row"><span class="label">Status</span><span class="value green">Running</span></div>
    <div class="row"><span class="label">Network</span><span class="value">Oasis Sapphire Testnet</span></div>

    <div class="spacer"></div>
    <div class="panel-title">Deployment</div>
    <div class="row"><span class="label">App ID</span><span class="value" style="font-size:11px;">rofl1qp9lm376wkqzce2w9nxg5fy3yrn3wqnrv5ang45w</span></div>
    <div class="row"><span class="label">Machine ID</span><span class="value">000000000000057f</span></div>
    <div class="row"><span class="label">Created</span><span class="value">2026-02-08 03:52 UTC</span></div>

    <div style="font-size:11px;color:var(--dim);margin-top:14px;margin-bottom:4px;">DEPLOYMENT HASH</div>
    <div class="hash-block">sha256:c97686c586d1620308ad53baa2<wbr>aa7f72eb8482d415da5208f0d954<wbr>e4c4b7dc56</div>

    <div class="spacer"></div>
    <div class="panel-title">Security Guarantees</div>

    <div class="security-row">
      <span class="icon secure">&#x1F512;</span>
      <span class="txt">Private key <strong style="color:var(--green)">generated inside TEE</strong> &mdash; never exported</span>
    </div>
    <div class="security-row">
      <span class="icon secure">&#x1F6E1;&#xFE0F;</span>
      <span class="txt">Developer access: <strong style="color:var(--green)">IMPOSSIBLE</strong></span>
    </div>
    <div class="security-row">
      <span class="icon secure">&#x2705;</span>
      <span class="txt">Code hash matches GitHub &mdash; <strong style="color:var(--green)">VERIFIED</strong></span>
    </div>
    <div class="security-row">
      <span class="icon secure">&#x1F9E0;</span>
      <span class="txt">Policy enforced in hardware &mdash; cannot be bypassed</span>
    </div>
    <div class="security-row">
      <span class="icon secure">&#x1F50D;</span>
      <span class="txt">Remote attestation: <strong style="color:var(--green)">VALID</strong></span>
    </div>

    <div class="spacer"></div>
    <div class="panel-title">How It Works</div>
    <div style="font-size:12px;color:var(--dim);line-height:1.7;">
      1. Agent generates a private key inside Intel TDX hardware<br>
      2. Key is sealed &mdash; no API, no admin backdoor, no extraction<br>
      3. Fetches prices from 2 oracles (CoinGecko + CryptoCompare)<br>
      4. Computes RSI &rarr; BUY / SELL / HOLD signal<br>
      5. Policy engine enforces safety limits inside the TEE<br>
      6. Signs &amp; broadcasts swap tx &mdash; only signed txs leave the enclave
    </div>

    <div class="links">
      <a href="https://github.com/SofieRu/ETH-Oxford-2026" target="_blank">View Source on GitHub</a>
      <a href="../attestation-report.md" target="_blank">View Attestation Report</a>
      <a href="../DEPLOYMENT.md" target="_blank">View Deployment Guide</a>
    </div>
  </div>

</main>

<!-- ════════════════ EXPANDABLE: LIVE LOGS ════════════════ -->
<div class="expandable-section">
  <button class="expand-btn" onclick="toggle('logs',this)">
    &#x1F50D; View Live Agent Logs <span class="arrow">&#x25B6;</span>
  </button>
  <div class="expand-content" id="logs">
    <div class="log-viewer"><span class="log-head">=== Sovereign AI TEE agent ===</span>

<span class="log-dim">[main]</span> RPC: https://sepolia.base.org
<span class="log-dim">[main]</span> CHAIN_ID: (from RPC)
<span class="log-dim">[main]</span> Initializing wallet...
<span class="log-dim">[main]</span> <span class="log-head">Wallet: 0x84F2ff12c1cbCebc73F37386b05c06464ab5e147</span>
<span class="log-dim">[main]</span> Balance: 0.0 ETH
<span class="log-dim">[main]</span> Loading policy...
<span class="log-dim">[main]</span> Policy: maxTradeSize = 0.5 ETH, dailyLimit = 2 ETH

<span class="log-dim">[main]</span> Agent loop started. Check interval: 600 s
<span class="log-dim">[main]</span> Emergency stop: OFF

<span class="log-dim">[main]</span> --- Cycle start | <span class="log-head">Wallet: 0x84F2ff12c1cbCebc73F37386b05c06464ab5e147</span> ---
<span class="log-dim">[main]</span> Generating trading signal...
<span class="log-tag">[strategy]</span> Generating signal...
<span class="log-tag">[strategy]</span> Fetching price from multiple oracles (CoinGecko, CryptoCompare)...
<span class="log-tag">[strategy]</span> CoinGecko: <span class="log-val">2095.94</span> | CryptoCompare: <span class="log-val">2101.89</span>
<span class="log-tag">[strategy]</span> Oracle consensus: <span class="log-val">2/2 sources agree</span> (spread 0.28 %)
<span class="log-tag">[strategy]</span> Fetching historical ETH/USD prices (days = 7)
<span class="log-tag">[strategy]</span> Fetched 168 historical price points
<span class="log-tag">[strategy]</span> RSI( 14 ) = <span class="log-warn">59.47</span> (oversold &lt; 30, overbought &gt; 70)
<span class="log-tag">[strategy]</span> Signal: <span class="log-warn">HOLD</span> &#8212; RSI 59.47 in neutral range [30, 70]
<span class="log-dim">[main]</span> Signal: HOLD | amount: 0 ETH | price: 2098.915 | RSI: 59.47
<span class="log-tag">[policy]</span> Checking policy for signal: HOLD amount: 0 ETH
<span class="log-tag">[policy]</span> <span class="log-val">&#x2713;</span> Emergency stop: not active
<span class="log-tag">[policy]</span> <span class="log-val">&#x2713;</span> HOLD &#8212; no trade needed, skip policy
<span class="log-dim">[main]</span> No trade (HOLD). Next check in 600 s</div>
  </div>
</div>

<!-- ════════════════ EXPANDABLE: ATTESTATION ════════════════ -->
<div class="expandable-section">
  <button class="expand-btn" onclick="toggle('attest',this)">
    &#x1F4DC; View Attestation Report <span class="arrow">&#x25B6;</span>
  </button>
  <div class="expand-content" id="attest">
    <div class="attest-viewer">
      <h2>Deployment Information</h2>
      <table>
        <tr><th>Field</th><th>Value</th></tr>
        <tr><td>App ID</td><td><code>rofl1qp9lm376wkqzce2w9nxg5fy3yrn3wqnrv5ang45w</code></td></tr>
        <tr><td>Machine ID</td><td><code>000000000000057f</code></td></tr>
        <tr><td>TEE Type</td><td>Intel TDX</td></tr>
        <tr><td>Status</td><td style="color:var(--green);">accepted</td></tr>
        <tr><td>Network</td><td>Oasis Sapphire Testnet</td></tr>
      </table>

      <h2>Wallet Address</h2>
      <p><code>0x84F2ff12c1cbCebc73F37386b05c06464ab5e147</code></p>

      <h2>Deployment Hash</h2>
      <p><code>sha256:c97686c586d1620308ad53baa2aa7f72eb8482d415da5208f0d954e4c4b7dc56</code></p>

      <h2>Verification Instructions</h2>
      <ul>
        <li>Verify the deployment hash matches the image deployed to the TEE.</li>
        <li>Confirm the App ID on Oasis explorer (Sapphire Testnet).</li>
        <li>Check that the wallet address matches the agent's funded wallet.</li>
      </ul>

      <h2>Timeline</h2>
      <ul>
        <li><strong>Created:</strong> 2026-02-08 03:52:11 +0000 GMT</li>
        <li><strong>Paid until:</strong> 2026-02-08 04:52:11 +0000 GMT</li>
        <li><strong>Report extracted:</strong> 2026-02-08T04:23:22.261Z</li>
      </ul>

      <h2>What This Proves</h2>
      <ul>
        <li>The trading agent is running inside an <strong>Intel TDX</strong> Trusted Execution Environment.</li>
        <li>The exact code (Docker image) is identified by the deployment hash.</li>
        <li>The wallet address is the agent's on-chain identity (keys never leave the TEE).</li>
        <li>Deployment and attestation are verifiable on the Oasis Sapphire Testnet.</li>
      </ul>
    </div>
  </div>
</div>

<script>
function toggle(id, btn) {
  var el = document.getElementById(id);
  var open = el.classList.toggle('open');
  btn.classList.toggle('open', open);
}
</script>

<!-- ════════════════ FOOTER ════════════════ -->
<footer>
  This agent runs autonomously inside an <strong style="color:var(--green)">Intel TDX</strong> Trusted Execution Environment via <strong>Oasis ROFL</strong>.<br>
  The private key was generated inside the TEE and cannot be extracted. Verify the deployment hash matches the code on GitHub.<br>
  <span style="color:#444;">ETH Oxford 2026 &middot; Sofie R&uuml;ffer &middot; Matthew Wilson &middot; Aakash Gnanavelu</span>
</footer>

</body>
</html>
